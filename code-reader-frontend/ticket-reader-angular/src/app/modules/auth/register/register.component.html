<form (ngSubmit)="onRegister()">
  <div class="row">
    <div class="col-md-6 mb-3">
      <div class="form-floating">
        <input type="text" class="form-control" id="firstname" 
               [(ngModel)]="firstname" name="firstname" placeholder="Nombre" required>
        <label for="firstname">Nombre</label>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <div class="form-floating">
        <input type="text" class="form-control" id="lastname" 
               [(ngModel)]="lastname" name="lastname" placeholder="Apellidos" required>
        <label for="lastname">Apellidos</label>
      </div>
    </div>
  </div>

  <div class="form-floating mb-3">
    <input type="email" class="form-control" id="email" 
           [(ngModel)]="email" name="email" placeholder="name@example.com" required>
    <label for="email">Email</label>
  </div>

  <div class="form-floating mb-3">
    <input type="password" class="form-control" id="password" 
           [(ngModel)]="password" (input)="checkPasswords()" 
           (focus)="onPasswordFieldFocused()" name="password" 
           placeholder="Contraseña" required>
    <label for="password">Contraseña</label>
  </div>

  <div class="form-floating mb-3">
    <input type="password" class="form-control" id="confirmPassword" 
           [(ngModel)]="confirmPassword" (input)="checkPasswords()" 
           name="confirmPassword" placeholder="Confirmar Contraseña" required>
    <label for="confirmPassword">Confirmar Contraseña</label>
  </div>

  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="adminMode" 
           [(ngModel)]="isAdmin" name="isAdmin">
    <label class="form-check-label" for="adminMode">
      Registrar como administrador
    </label>
  </div>

  <div *ngIf="passwordTouched" class="mb-3">
    <p class="small" [class.text-success]="isLengthValid" [class.text-danger]="!isLengthValid">
      <i [class]="isLengthValid ? 'fas fa-check' : 'fas fa-times'"></i> 
      Mínimo 8 caracteres
    </p>
    <p class="small" [class.text-success]="hasUpperCase" [class.text-danger]="!hasUpperCase">
      <i [class]="hasUpperCase ? 'fas fa-check' : 'fas fa-times'"></i> 
      Una letra mayúscula
    </p>
    <p class="small" [class.text-success]="hasSpecialChar" [class.text-danger]="!hasSpecialChar">
      <i [class]="hasSpecialChar ? 'fas fa-check' : 'fas fa-times'"></i> 
      Un símbolo especial
    </p>
  </div>

  <div class="d-grid">
    <button type="submit" class="btn btn-primary btn-lg" 
            [disabled]="passwordMismatch || !isLengthValid || !hasUpperCase || !hasSpecialChar">
      Registrarse
    </button>
  </div>

  <div *ngIf="registrationMessage" class="alert mt-3" 
       [class.alert-success]="registrationMessage.includes('éxito')"
       [class.alert-danger]="!registrationMessage.includes('éxito')">
    {{ registrationMessage }}
  </div>
</form>